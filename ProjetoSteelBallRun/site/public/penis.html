<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Corrida de Cavalos - Vintech</title>
    <link rel="stylesheet" href="style.css" />
  </head>

  <body>
    <div id="divVoltas">
      <div class="grupoElemento">
        <select name="quantidadeVoltas" id="numeroVoltas">
          <option value="0">Selecionar Voltas</option>
          <option value="5">5 Voltas</option>
          <option value="6">6 Voltas</option>
          <option value="7">7 Voltas</option>
          <option value="8">8 Voltas</option>
          <option value="9">9 Voltas</option>
          <option value="10">10 Voltas</option>
        </select>
      </div>
      <button onclick="continuar()">
        <span class="btnText">Continuar</span>
      </button>
    </div>
    <div id="divCavalos">
      <select name="quantidadeCavalos" id="numeroCavalos">
        <option value="0">Selecionar Quantidade Cavalos</option>
        <option value="3">3 Cavalos</option>
        <option value="4">4 Cavalos</option>
        <option value="5">5 Cavalos</option>
        <option value="6">6 Cavalos</option>
      </select>
      <button onclick="continuar()">
        <span class="btnText">Continuar</span>
      </button>
      <div id="divNomes"></div>
    </div>
    <div id="divResp"></div>
    <div id="divErro">
      Valores Inválidos! Digite um valor numérico positivo!
    </div>

    <div id="nome_cavalos" style="display: none">
      <div class="input_nomes" id="input_nomes">
        <input id="nomeCavalos" /> Insira o nome do cavalo
        <button id="btn_inserir" onclick="adicionar()">Inserir</button>
      </div>
    </div>
    <button id="btn_largada" onclick="iniciar()">Largada</button>
    <button id="btn_podio" onclick="ver_podio()"  style="display: none;">Ver o pódio</button>
    <div id="podio">

    </div>
  </body>
</html>
<script>
  var qtde_voltas;
  var qtde_cavalos;
  var lista_cavalo = [];
  var lista_tempo = [];
  var contador_div = 0;

  function continuar() {
    // usando a mesma função para executar a mudança de diferentes DIVS utilizando
    // um contador
    contador_div++;
    if (contador_div == 1) {
      qtde_voltas = numeroVoltas.value;
      if (qtde_voltas == 0) {
        // Aqui é para aparecer um erro e não seguir
        // Troque para a div erro
        alert("Selecione o número de voltas correto");
        contador_div--;
        return;
      }

      divVoltas.style.display = "none";
      divCavalos.style.display = "flex";
    } else if (contador_div == 2) {
      qtde_cavalos = numeroCavalos.value;

      if (qtde_cavalos == 0) {
        // Aqui é para aparecer um erro e não seguir
        // Troque para a div erro
        alert("Selecione o número de cavalos correto");
        contador_div--;
        return;
      }

      divVoltas.style.display = "none";
      divCavalos.style.display = "flex";
    } else if (contador_div == 3) {
      nome_cavalos.style.display = "flex";
      divCavalos.style.display = "none";
    }
  }
  // divResp.style = "display:none;";
  // divErro.style = "display:none;";
  function iniciar() {
    btn_largada.style.display = "none";

    divResp.innerHTML = "";
    for (let i = 1; i <= qtde_cavalos; i++) {
      lista_tempo.push(0);
    }
    alert(lista_tempo)
    for (let i = 1; i <= qtde_voltas; i++) {
      divResp.innerHTML += `<span class='numeroVolta'>${i}ª Volta</span><br>`;
      for (let j = 0; j < lista_cavalo.length; j++) {
        let random = Number((7 + Math.random() * 2).toFixed(1));
        lista_tempo[j] += random;
        console.log(`${lista_tempo[j]}`)
        divResp.innerHTML += `
                            <div class='cardCavalo'>
                                <span class='nomeCavalo'>Cavalo ${
                                  lista_cavalo[j]
                                }</span>
                                <span class='label'>Tempo da Volta: ${random} minutos</span>
                                <span class='label'>Tempo Acumulado: ${lista_tempo[j].toFixed(1)} minutos</span>
                            </div>
                            <br>
                        `;
      }
      divResp.innerHTML += `<br><br>`;
    }
    btn_podio.style.display = "block"
    divResp.innerHTML += `
            Fim da Corrida!
            <br><br>

        `;
    desaparecerDiv();
  }
  // Inserção de nomes no vetor ordernado
  var ax_cavalos = "";
  function adicionar() {
    ax_cavalos = nomeCavalos.value;
    if (ax_cavalos == "") {
      alert("Insira o nome do cavalo");
    } else {
      lista_cavalo.push(ax_cavalos);
      nomeCavalos.value = "";
      if (lista_cavalo.length == qtde_cavalos) {
        nome_cavalos.style.display = "none";
        btn_largada.style.display = "block";
      }
    }
  }

  function ver_podio(){
    let nomePodio = []
    let tempoPodio = []
    for(let i = 0; i < 3; i++){
        let indexDo = lista_tempo.indexOf(Math.min(...lista_tempo))
        nomePodio.push(lista_cavalo[indexDo])
        tempoPodio.push(lista_tempo[indexDo])
        // O console diz que aqui não é uma function
        lista_tempo.splice(indexDo,1)
        lista_cavalo.splice(indexDo,1)
    }
    nomePodio.reverse()
    tempoPodio.reverse()
    alert(nomePodio, tempoPodio)
  }

  function desaparecerDiv() {
    divResp.style = "display:flex;";
    // divInicio.style = "display:none;";
  }
  //   function verificarCampo() {
  //     let quantidadeCavalos = numero_cavalos.value;

  //     if (quantidadeCavalos <= 0 || isNaN(quantidadeCavalos)) {
  //       divErro.style = "display:flex;";
  //       setTimeout(() => {
  //         divErro.style = "display:none;";
  //       }, 2000);
  //       return false;
  //     } else {
  //       return true;
  //     }
  //   }
  //   t = 1000;
  //   for (let h = 0; h <= 10; h++) {
  //     setTimeout(() => {
  //       console.log(h);
  //     }, t);
  //     t += 500;
  //   }

  //   function cavalos_dados() {
  //     if( )
  //     for (let index = 0; index <= qtde_cavalos; index++) {
  //       nome_cavalos.innerHTML += `<input type="text" name="" id="ipt_nome" placeholder="Digite o nome do cavalo ${index}">`;
  //     }
  //   }
</script>
